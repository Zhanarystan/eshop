<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://ultraq.net.nz/thymeleaf/layout" layout:decorator="layout/main.html">
<div layout:fragment="site_content">
<div class="row mt-5">
    <div class="col-9 offset-2">
        <div class="row">
            <div class="col-6 offset-3">
                <a th:href="@{'/viewphoto/'+${currentUser.getPictureURL()}}"><img th:src="@{'/viewphoto/'+${currentUser.getPictureURL()}}" class="my-3" style="width: 100%; height: 300px;"></a>
                <form th:action="@{'/edit-avatar'}" method="post" enctype="multipart/form-data">
                    <div class="custom-file">
                        <input type="file" class="custom-file-input" id="customFile" name="user_avatar">
                        <label class="custom-file-label" for="customFile" th:text="#{button.choose_file}"></label>
                        <button class="btn btn-success mt-2" th:text="#{button.upload_file}"></button>
                    </div>
                </form>
            </div>
        </div>

        <form th:action="@{'/edit-profile'}" method="post">
            <div class="form-group">
                <input type="hidden" name="user_id" th:value="${currentUser.getId()}">
                <label>Email:</label>
                <input type="email" class="form-control" name="user_email" th:value="${currentUser.getEmail()}" readonly>
            </div>

            <div class="form-group">
                <label>User fullname:</label>
                <input type="text" class="form-control" name="user_full_name" th:value="${currentUser.getFullName()}">
            </div>

            <div class="form-group">
                <button type="submit" name="save" class="btn btn-success">UPDATE PROFILE</button>
            </div>
        </form>
<br>
        <form th:action="@{'/edit-password'}" method="post">
            <div class="form-group">
                <label>Old Password:</label>
                <input type="password" class="form-control" name="old_user_password">
            </div>
            <div class="alert alert-danger alert-dismissible fade show" role="alert" th:if="${oldPasswordError!=null}">
                Incorrect old password
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">x</span>
                </button>
            </div>
            <div class="form-group">
                <label>New Password:</label>
                <input type="password" class="form-control" name="new_user_password">
            </div>
            <div class="form-group">
                <label>Repeat New Password:</label>
                <input type="password" class="form-control" name="re_new_user_password">
            </div>
            <div class="alert alert-danger alert-dismissible fade show" role="alert" th:if="${rePasswordError!=null}">
                Repassword isn't matches new password
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">x</span>
                </button>
            </div>
            <div class="form-group">
                <button type="submit" name="save" class="btn btn-success">UPDATE PASSWORD</button>
            </div>
        </form>
    </div>
</div>
</div>